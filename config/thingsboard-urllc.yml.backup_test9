# ThingsBoard Configuration - GC Ultra-Optimized for URLLC
# =========================================================

# === RPC TIMEOUT CONFIGURATION ===
CLIENT_SIDE_RPC_TIMEOUT: 1000

# === DATABASE BATCH PROCESSING ===
SQL_TS_BATCH_MAX_DELAY_MS: 10
SQL_TS_LATEST_BATCH_MAX_DELAY_MS: 5

# === GC ULTRA-OTIMIZADO PARA URLLC ===
# Heap 4GB fixo + GC pausas <5ms + otimizações agressivas
JAVA_OPTS: "-Xmx4g -Xms4g -XX:+UseG1GC -XX:MaxGCPauseMillis=5 -XX:G1HeapRegionSize=8m -XX:G1NewSizePercent=60 -XX:G1MaxNewSizePercent=80 -XX:ParallelGCThreads=4 -XX:ConcGCThreads=2 -XX:+UnlockExperimentalVMOptions -XX:+AlwaysPreTouch -XX:+UseFastAccessorMethods -XX:+AggressiveOpts"

# === THREAD POOLS OTIMIZADOS PARA 8 CORES ===
TB_QUEUE_CORE_WORKERS: 16
TB_QUEUE_RULE_ENGINE_THREAD_POOL_SIZE: 12
TB_QUEUE_TRANSPORT_THREAD_POOL_SIZE: 8
TB_QUEUE_JS_THREAD_POOL_SIZE: 4
ACTORS_SYSTEM_MAX_ACTOR_MAILBOX_SIZE: 500

# === MQTT ULTRA-OTIMIZADO ===
MQTT_NETTY_BOSS_GROUP_THREAD_COUNT: 2
MQTT_NETTY_WORKER_GROUP_THREAD_COUNT: 8
MQTT_NETTY_MAX_PAYLOAD_SIZE: 32768
MQTT_NETTY_SO_KEEP_ALIVE: true
MQTT_NETTY_TCP_NO_DELAY: true
MQTT_NETTY_SO_RCV_BUF: 131072
MQTT_NETTY_SO_SND_BUF: 131072

# === QUEUE OPTIMIZATION ===
TB_QUEUE_TYPE: in-memory
TB_QUEUE_CORE_POLL_INTERVAL_MS: 10
TB_QUEUE_CORE_PARTITIONS: 8

# === HTTP OPTIMIZATION ===
HTTP_REQUEST_TIMEOUT_MS: 2000
HTTP_MAX_CONNECTIONS: 400
HTTP_MAX_CONNECTIONS_PER_ROUTE: 100
HTTP_CONNECTION_TIMEOUT_MS: 500
HTTP_SOCKET_TIMEOUT_MS: 1000

# === CACHE OPTIMIZATION ===
CACHE_TYPE: caffeine
CACHE_SPECS_RELATIONS: maximumSize=100000,expireAfterWrite=1800s

# === BASIC CONFIGURATION ===
HTTP_ENABLED: true
MQTT_ENABLED: true
MQTT_BIND_PORT: 1883
HTTP_BIND_PORT: 8080
SECURITY_ENABLED: true
INSTALL_TB: true
LOAD_DEMO: true
MAIL_ENABLED: false
